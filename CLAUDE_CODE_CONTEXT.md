# Claude Code Implementation Context

## Project: Team Playbook - Documentation-First, AI-Augmented Standards

This file provides complete context for continuing implementation in Claude Code.

---

## Current State

### Repository
- **URL**: https://github.com/kandala05/team-playbook
- **Status**: V0 foundation exists with basic structure
- **Framework**: Astro Starlight following Diataxis

### What Exists (Current Files)
```
team-playbook/
├── astro.config.mjs          # Basic config (needs update)
├── package.json
├── tsconfig.json
├── README.md                 # Basic setup instructions
├── MANIFEST.md               # Project intent (may need expansion)
├── public/
├── src/
│   ├── assets/
│   ├── content/
│   │   ├── docs/             # Documentation content (sparse)
│   │   └── config.ts
```

### What's Missing (To Be Added)
1. Complete documentation content files
2. GitHub Actions deployment workflow
3. Updated astro.config.mjs with proper routing
4. manifest.json generation for AI context
5. Diataxis-structured content

---

## Implementation Goals

### Phase 1: Deploy Playbook (Priority)
**Goal**: Get team-playbook live at `https://kandala05.github.io/team-playbook/`

**Tasks**:
1. Add complete documentation content
2. Configure GitHub Actions deployment
3. Update astro.config.mjs for GitHub Pages
4. Test local build and deploy

### Phase 2: Reference Implementation
**Goal**: Create platform-cli as reference project

**Tasks**:
1. Create new repository following playbook standards
2. Build MANIFEST.md using template
3. Create V0 documentation site
4. Implement CLI following docs

### Phase 3: Unified Documentation Architecture
**Goal**: Set up centralized documentation discovery

**Tasks**:
1. Deploy Cloudflare Worker for routing
2. Implement manifest.json generation
3. Add AI context aggregation API
4. Integrate unified search

---

## Files to Add to Repository

### 1. GitHub Actions Workflow
**Path**: `.github/workflows/deploy.yml`
**Purpose**: Automatic deployment to GitHub Pages
**Source**: Use `deploy.yml` from handoff package

### 2. Updated Astro Config
**Path**: `astro.config.mjs` (replace existing)
**Purpose**: Proper base path and enhanced sidebar
**Source**: Use `astro.config.mjs` from handoff package

### 3. Documentation Content

#### Explanation Section
**Path**: `src/content/docs/explanation/manifest-philosophy.md`
**Purpose**: Core philosophy documentation
**Source**: Use `manifest-philosophy.md` from handoff package

#### Reference Section
**Path**: `src/content/docs/reference/manifest-template.md`
**Purpose**: MANIFEST.md template with examples
**Source**: Use `manifest-template.md` from handoff package

#### How-To Section
**Path**: `src/content/docs/how-to/bootstrap.md`
**Purpose**: Step-by-step project bootstrapping guide
**Source**: Use `bootstrap-guide.md` from handoff package

### 4. Infrastructure Files

**Path**: `scripts/generate-manifest.js`
**Purpose**: Generate manifest.json during build for AI consumption
**Create new** - see template below

**Path**: `public/manifest.json`
**Purpose**: AI-readable documentation structure
**Generated by script**

### 5. Documentation Files

**Path**: `DEPLOYMENT.md`
**Purpose**: Deployment instructions and troubleshooting
**Source**: Use from handoff package

**Path**: `UNIFIED_DOCS_ARCHITECTURE.md`
**Purpose**: Documentation on the unified docs strategy
**Source**: Use from handoff package

**Path**: `REFERENCE_IMPLEMENTATION.md`
**Purpose**: Plan for platform-cli reference project
**Source**: Use from handoff package

---

## Step-by-Step Implementation in Claude Code

### Step 1: Clone and Setup
```bash
git clone https://github.com/kandala05/team-playbook.git
cd team-playbook
pnpm install
```

### Step 2: Add Files from Handoff Package

**Copy these files to your local repo:**
```bash
# Create necessary directories
mkdir -p .github/workflows
mkdir -p src/content/docs/explanation
mkdir -p src/content/docs/reference
mkdir -p src/content/docs/how-to
mkdir -p scripts

# Add the files (you'll copy from handoff package)
# .github/workflows/deploy.yml
# astro.config.mjs (replace existing)
# src/content/docs/explanation/manifest-philosophy.md
# src/content/docs/reference/manifest-template.md
# src/content/docs/how-to/bootstrap.md
```

### Step 3: Create Manifest Generation Script

**File**: `scripts/generate-manifest.js`
```javascript
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));

const manifest = {
  name: "team-playbook",
  version: "1.0.0",
  description: "Documentation-First, AI-Augmented software development standards",
  repository: "https://github.com/kandala05/team-playbook",
  documentation: {
    framework: "diataxis",
    sections: {
      explanation: {
        description: "Conceptual understanding and philosophy",
        files: [
          {
            path: "/explanation/manifest-philosophy/",
            title: "The Manifest Philosophy",
            summary: "Documentation-First, AI-Augmented workflow",
            aiContext: "Read this first to understand the team's development philosophy"
          }
        ]
      },
      reference: {
        description: "Templates and specifications",
        files: [
          {
            path: "/reference/manifest-template/",
            title: "MANIFEST.md Template",
            summary: "Standard template for project manifests",
            aiContext: "Use this template for all new projects"
          }
        ]
      },
      howto: {
        description: "Step-by-step implementation guides",
        files: [
          {
            path: "/how-to/bootstrap/",
            title: "Bootstrap a New Project",
            summary: "Creating a project following team standards",
            aiContext: "Reference for project initialization workflow"
          }
        ]
      }
    }
  },
  aiGuidance: {
    primaryContext: [
      "/explanation/manifest-philosophy/",
      "/reference/manifest-template/"
    ],
    codingStandards: "/reference/standards/",
    patterns: "/explanation/patterns/"
  },
  metadata: {
    plane: "developer-control-plane",
    capability: "engineering-standards",
    tags: ["platform-engineering", "documentation", "standards"],
    lastUpdated: new Date().toISOString()
  }
};

const outputPath = path.join(__dirname, '../public/manifest.json');
fs.writeFileSync(outputPath, JSON.stringify(manifest, null, 2));
console.log('✅ Generated manifest.json');
```

### Step 4: Update package.json Scripts

Add to `package.json`:
```json
{
  "scripts": {
    "dev": "astro dev",
    "build": "node scripts/generate-manifest.js && astro build",
    "preview": "astro preview",
    "astro": "astro"
  }
}
```

### Step 5: Test Locally
```bash
# Build the site
pnpm build

# Preview production build
pnpm preview

# Visit http://localhost:4321
```

### Step 6: Deploy to GitHub Pages

```bash
# Commit all changes
git add .
git commit -m "Add complete V0 documentation and deployment config"
git push origin main

# GitHub Actions will automatically deploy
# Check Actions tab: https://github.com/kandala05/team-playbook/actions
```

### Step 7: Enable GitHub Pages

1. Go to repository Settings
2. Navigate to Pages section
3. Under "Source", select: **GitHub Actions**
4. Save

Site will be live at: `https://kandala05.github.io/team-playbook/`

---

## Claude Code Prompts to Use

When working in Claude Code, use these prompts:

### Initial Setup
```
I'm implementing the team playbook following our Documentation-First approach.

Context files:
- CLAUDE_CODE_CONTEXT.md (this file)
- All files in the handoff package

First task: Add all the content files from the handoff package to the correct locations in src/content/docs/

Please:
1. Create the directory structure
2. Add the markdown content files
3. Ensure frontmatter is correct
4. Verify sidebar navigation matches
```

### Deployment Configuration
```
Add the GitHub Actions deployment workflow:

1. Create .github/workflows/deploy.yml
2. Use the workflow from the handoff package
3. Update package.json build script to generate manifest
4. Create the manifest generation script

Ensure the build process:
- Generates manifest.json
- Builds the Astro site
- Deploys to GitHub Pages
```

### Testing
```
Help me test the complete build:

1. Run pnpm build locally
2. Check that manifest.json is generated in dist/
3. Verify all routes work in preview
4. Check that sidebar navigation is correct

If there are errors, help me debug them.
```

### Next Phase
```
Now that the playbook is deployed, let's create the reference implementation.

Using REFERENCE_IMPLEMENTATION.md as the guide:
1. Create a new repository structure for platform-cli
2. Write the MANIFEST.md following our template
3. Set up the V0 documentation site
4. Plan the implementation phases

This will demonstrate the playbook in action.
```

---

## Important Context for Claude Code

### Team Philosophy
- **Documentation-First**: V0 documentation must exist before V1 code
- **AI-Augmented**: Docs serve both humans and LLMs
- **Diataxis Framework**: All docs organized as Explanation/Reference/How-to/Tutorials

### Technology Stack
- **Documentation**: Astro + Starlight
- **Platform Apps**: Next.js 15, TypeScript, Drizzle ORM, AWS SST
- **Infrastructure**: AWS, EKS, Concourse CI
- **Development**: Zed editor with Supermaven

### Platform Structure
Four core planes:
1. App CI/CD Plane
2. EKS Cluster Plane  
3. Observability Plane
4. Infrastructure/AWS Resource Plane

Plus Developer Control Plane (Backstage, Support App, CLI)

### Key Principles
1. Start with MANIFEST.md (strategic intent)
2. Build V0 documentation site (context for AI)
3. Implement V1+ code aligned with docs
4. Keep docs co-located with code
5. Aggregate at platform level for discovery

---

## Success Criteria

### Phase 1 Complete When:
- ✅ Team playbook deployed to GitHub Pages
- ✅ All Diataxis sections have content
- ✅ manifest.json generates correctly
- ✅ Site is navigable and professional

### Phase 2 Complete When:
- ✅ Reference implementation (platform-cli) exists
- ✅ It follows playbook standards exactly
- ✅ V0 docs predict V1 implementation
- ✅ Can be used as template for other projects

### Phase 3 Complete When:
- ✅ Multiple docs sites route through platform.yourdomain.com
- ✅ Unified search works across all documentation
- ✅ AI context API aggregates all manifests
- ✅ Team uses centralized docs daily

---

## Additional Resources

From the handoff package:
- `unified-router.js` - Cloudflare Worker for routing
- `manifest-template.json` - JSON structure for AI consumption
- `UNIFIED_DOCS_ARCHITECTURE.md` - Complete architecture docs

These will be needed in Phase 3 for the unified documentation platform.

---

## Quick Reference Commands

```bash
# Development
pnpm dev                    # Start dev server
pnpm build                  # Build production site
pnpm preview                # Preview production build

# Deployment
git push origin main        # Triggers GitHub Actions deploy

# Testing
curl https://kandala05.github.io/team-playbook/manifest.json
# Should return AI-consumable documentation manifest
```

---

**Ready for Claude Code!** Start by adding the content files, then test locally, then deploy.
